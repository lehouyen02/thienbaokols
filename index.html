<?xml version="1.0" encoding="UTF-8"?>

-<web-app xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" version="2.5">

<!-- 过滤器类所在的路径： -->


<!-- 拦截所有url -->


<!-- <filter><filter-name>UrlRewriteFilter</filter-name><filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class></filter><filter-mapping><filter-name>UrlRewriteFilter</filter-name><url-pattern>/*</url-pattern></filter-mapping> -->



-<context-param>

<param-name>contextConfigLocation</param-name>

<param-value>classpath:bean.xml</param-value>

</context-param>

<!-- 对Spring容器进行实例化 -->



-<listener>

<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>

</listener>

<!-- 分钟 为单位，默认 480 分钟 -->



-<session-config>

<session-timeout>480</session-timeout>

</session-config>

<!-- 保持session 延迟加载 -->



-<filter>

<filter-name>OpenSessionInViewFilter</filter-name>

<filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>

</filter>


-<filter-mapping>

<filter-name>OpenSessionInViewFilter</filter-name>

<url-pattern>*</url-pattern>

</filter-mapping>

<!-- 服务器启动关闭监控器 -->



-<servlet>

<servlet-name>serverLinstenerServlet</servlet-name>

<servlet-class>com.YuanXu.Util.Servlet.ServerLinstenerServlet</servlet-class>

<load-on-startup>0</load-on-startup>

</servlet>

<!-- 重写struts第一道过滤器 -->



-<filter>

<filter-name>struts2</filter-name>

<filter-class>com.YuanXu.Util.Filter.MyStrutsPrepareAndExecuteFilter </filter-class>


-<init-param>

<param-name>noFilter</param-name>

<param-value>/uploadImage.html</param-value>

</init-param>

</filter>


-<filter-mapping>

<filter-name>struts2</filter-name>

<url-pattern>/*</url-pattern>

<dispatcher>REQUEST</dispatcher>

<!--这两行很重要不配的话无法转发到action-->


<dispatcher>FORWARD</dispatcher>

</filter-mapping>

<!-- 监听httpsession -->



-<listener>

<listener-class>com.YuanXu.Util.Filter.UserSessionListener</listener-class>

</listener>

<!-- 过滤器 -->



-<filter>

<filter-name>AdminFilter</filter-name>

<filter-class>com.YuanXu.Util.Filter.AdminFilter</filter-class>

</filter>


-<filter-mapping>

<filter-name>AdminFilter</filter-name>

<url-pattern>/admin/*</url-pattern>

</filter-mapping>

<!-- 验证码 -->



-<servlet>

<servlet-name>RandomGraphics2</servlet-name>

<servlet-class>com.YuanXu.Util.Servlet.RandomGraphics2</servlet-class>

</servlet>


-<servlet-mapping>

<servlet-name>RandomGraphics2</servlet-name>

<url-pattern>/randomGraphics2</url-pattern>

</servlet-mapping>


-<welcome-file-list>

<welcome-file>404.jsp</welcome-file>

</welcome-file-list>


-<error-page>

<error-code>404</error-code>

<location>/public/error.jsp</location>

</error-page>

</web-app>
